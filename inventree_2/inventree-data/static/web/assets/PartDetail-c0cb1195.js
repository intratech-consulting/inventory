import{j as t,ag as T,i as e,y as Q,r as d,h,cV as ce,cW as ue,cX as pe,af as me,G as le,a3 as R,c1 as K,b7 as L,S as O,ay as _e,bt as be,b6 as ee,bu as he,bv as xe,bw as fe,bn as ke,bx as ge,bI as je,b8 as ye,by as ve,ba as Te,bb as Ce,bA as Pe,bU as te,bB as Se,bC as Fe,bf as we,bg as Ae,cY as Ie,bh as Me,m as Re}from"./vendor-580d7f6a.js";import{a as w,U as x,A as c,i as v,M as P,g as V}from"./index-539d0685.js";import{a as U,I as qe,D as q}from"./ItemDetails-8f9834aa.js";import{D as De,N as Ee}from"./MarkdownEditor-8fcb1f1c.js";import{T as X}from"./BaseContext-71d55e61.js";import{B as Ne,V as Be,L as Ke,U as Le,A as ae,a as Oe,E as Ve,D as Qe}from"./ActionDropdown-0b7f88be.js";import{P as Ue}from"./PageDetail-e83b8dc6.js";import{P as Xe}from"./PanelGroup-ecf19d17.js";import{P as Ge,a as We}from"./PartTable-893897df.js";import{e as G,D as W,R as ne,B as C,h as re,N as Ze,P as ze}from"./ColumnRenderers-c7f5177c.js";import{u as He}from"./PartForms-dc889e22.js";import{a as Z,u as z,b as H}from"./UseForm-5e9a21d6.js";import{u as Ye}from"./UseInstance-05463349.js";import{T as oe,P as se}from"./Instance-4f17d9b0.js";import{Y as de}from"./YesNoButton-cd4c504e.js";import{a as $e,b as Je}from"./ApiForm-173d0ec5.js";import{g as Y}from"./urls-9eea01e5.js";import{u as A,R as $,a as D,I}from"./InvenTreeTable-7dffc519.js";import{u as E,a as et}from"./DesktopAppView-f36ad07f.js";import{B as tt}from"./BuildOrderTable-0f548787.js";import{A as at}from"./AttachmentTable-3bae0b2b.js";import{A as J}from"./AddItemButton-9bde5586.js";import{M as st}from"./ManufacturerPartTable-4fd3748c.js";import{S as it}from"./SupplierPartTable-5f41232e.js";import{S as lt}from"./SalesOrderTable-f3e08017.js";import{S as nt}from"./StockItemTable-b84d5ecc.js";import"./ProgressBar-f667695e.js";import"./ModelType-07300e1e.js";import"./StylishText-5ee5b946.js";import"./notifications-b554622d.js";import"./Placeholder-f60056df.js";import"./index.es-6e6e8db2.js";import"./CompanyForms-f616143f.js";import"./StockForms-2847fb41.js";function S(s){return t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:t.jsx(U,{icon:s})})}function rt({part:s}){return t.jsx("td",{colSpan:2,children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[!s.active&&t.jsx(T,{label:e._({id:"TgUP31"}),children:t.jsx(Q,{color:"red",variant:"filled",children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[t.jsx(U,{icon:"inactive",iconProps:{size:19}})," ",t.jsx(X,{id:"NoNwIX"})]})})}),s.template&&t.jsx(T,{label:e._({id:"0iczgN"}),children:S("template")}),s.assembly&&t.jsx(T,{label:e._({id:"DMNUuc"}),children:S("assembly")}),s.component&&t.jsx(T,{label:e._({id:"06p4ek"}),children:S("component")}),s.trackable&&t.jsx(T,{label:e._({id:"kO7b8p"}),children:S("trackable")}),s.purchaseable&&t.jsx(T,{label:e._({id:"JSWE8U"}),children:S("purchaseable")}),s.saleable&&t.jsx(T,{label:e._({id:"CPLZbu"}),children:S("saleable")}),s.virtual&&t.jsx(T,{label:e._({id:"2MwUq+"}),children:t.jsx(Q,{color:"yellow",variant:"filled",children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[t.jsx(U,{icon:"virtual",iconProps:{size:18}})," ",t.jsx(X,{id:"ksX7Wx"})]})})})]})})}function ot(){return{part:{hidden:!0},sub_part:{filters:{component:!0,virtual:!1}},quantity:{},reference:{},overage:{},note:{},allow_variants:{},inherited:{},consumable:{},optional:{}}}function ie(s){let o=s.available_stock;return o+=(s==null?void 0:s.available_substitute_stock)??0,s.allow_variants&&(o+=(s==null?void 0:s.available_variant_stock)??0),o}function dt({partId:s,params:o={}}){const u=E(),_=w(),a=A("bom"),f=d.useMemo(()=>[{accessor:"part",switchable:!1,sortable:!0,render:i=>{let l=i.sub_part_detail,b=[];return i.part!=s&&b.push(t.jsx(h,{children:e._({id:"tCdfmU"})},"different-parent")),l&&t.jsx(G,{value:t.jsx(oe,{src:l.thumbnail||l.image,alt:l.description,text:l.full_name}),extra:b,title:e._({id:"vVRudK"})})}},W({accessor:"sub_part_detail.description"}),ne(),{accessor:"quantity",switchable:!1,sortable:!0},{accessor:"substitutes",render:i=>(i.substitutes??[]).length>0?i.length:t.jsx(de,{value:!1})},C({accessor:"optional"}),C({accessor:"consumable"}),C({accessor:"allow_variants"}),C({accessor:"inherited"}),{accessor:"price_range",title:e._({id:"YA4hwj"}),sortable:!1,render:i=>re(i.pricing_min,i.pricing_max)},{accessor:"available_stock",sortable:!0,render:i=>{let l=[],b=ie(i),g=(i==null?void 0:i.on_order)??0,n=(i==null?void 0:i.building)??0,m=b<=0?t.jsx(h,{color:"red",italic:!0,children:e._({id:"AbC1Px"})}):b;return i.external_stock>0&&l.push(t.jsxs(h,{children:[e._({id:"e8fwfT"}),": ",i.external_stock]},"external")),i.available_substitute_stock>0&&l.push(t.jsxs(h,{children:[e._({id:"XTe+lK"}),":"," ",i.available_substitute_stock]},"substitute")),i.allow_variants&&i.available_variant_stock>0&&l.push(t.jsxs(h,{children:[e._({id:"LdvJ9e"}),": ",i.available_variant_stock]},"variant")),g>0&&l.push(t.jsxs(h,{children:[e._({id:"/MB+gl"}),": ",g]},"on_order")),n>0&&l.push(t.jsxs(h,{children:[e._({id:"oZd08v"}),": ",n]},"building")),t.jsx(G,{value:m,extra:l,title:e._({id:"odasNw"})})}},{accessor:"can_build",title:e._({id:"S/9nwz"}),sortable:!1,render:i=>{if(i.consumable)return t.jsx(h,{italic:!0,children:e._({id:"f/GbFw"})});let l=ie(i)/i.quantity;return l=Math.trunc(l),t.jsx(h,{color:l<=0?"red":void 0,children:l})}},Ze()],[s,o]),p=d.useMemo(()=>[{name:"sub_part_trackable",label:e._({id:"SH3bOE"}),description:e._({id:"GnQW79"})},{name:"sub_part_assembly",label:e._({id:"+e3Z9N"}),description:e._({id:"1LYhEA"})},{name:"available_stock",description:e._({id:"Dg4tQl"})},{name:"on_order",description:e._({id:"xfq4ym"})},{name:"validated",description:e._({id:"37tHwV"})},{name:"inherited",description:e._({id:"/8VvXe"})},{name:"optional",description:e._({id:"XHqrSv"})},{name:"consumable",description:e._({id:"66RvWY"})},{name:"has_pricing",label:e._({id:"T43R5B"}),description:e._({id:"Aszrkt"})}],[s,o]),k=d.useCallback(i=>{if(i.part&&i.part!=s)return[{title:e._({id:"aDkF9z"}),onClick:()=>u(`/part/${i.part}/`),icon:t.jsx(ce,{})}];let l=[];return l.push({title:e._({id:"tlXhbF"}),color:"green",hidden:i.validated||!_.hasChangeRole(x.part),icon:t.jsx(ue,{})}),l.push({title:e._({id:"Omvn40"}),color:"blue",hidden:!_.hasChangeRole(x.part),icon:t.jsx(pe,{})}),l.push($({hidden:!_.hasChangeRole(x.part),onClick:()=>{$e({url:c.bom_list,pk:i.pk,title:e._({id:"RqNith"}),fields:ot(),successMessage:e._({id:"AT7M/M"}),onFormSuccess:a.refreshTable})}})),l.push(D({hidden:!_.hasDeleteRole(x.part),onClick:()=>{Je({url:c.bom_list,pk:i.pk,title:e._({id:"1kk0o3"}),successMessage:e._({id:"ZrT5g0"}),onFormSuccess:a.refreshTable,preFormWarning:e._({id:"+d9ARc"})})}})),l},[s,_]);return t.jsx(I,{url:v(c.bom_list),tableState:a,columns:f,props:{params:{...o,part:s,part_detail:!0,sub_part_detail:!0},tableFilters:p,onRowClick:i=>u(Y(P.part,i.sub_part)),rowActions:k}})}function ct({partId:s,params:o={}}){const u=E(),_=A("usedin"),a=d.useMemo(()=>[{accessor:"part",switchable:!1,sortable:!0,render:p=>t.jsx(se,{part:p.part_detail})},{accessor:"sub_part",sortable:!0,render:p=>t.jsx(se,{part:p.sub_part_detail})},{accessor:"quantity",render:p=>p.quantity},ne()],[s]),f=d.useMemo(()=>[{name:"inherited",description:e._({id:"/8VvXe"})},{name:"optional",description:e._({id:"XHqrSv"})},{name:"part_active",label:e._({id:"F6pfE9"}),description:e._({id:"v3oiP1"})},{name:"part_trackable",label:e._({id:"y6MnU0"}),description:e._({id:"pvl7N9"})}],[s]);return t.jsx(I,{url:v(c.bom_list),tableState:_,columns:a,props:{params:{...o,uses:s,part_detail:!0,sub_part_detail:!0},tableFilters:f,onRowClick:p=>u(Y(P.part,p.part))}})}function ut({partId:s}){const o=A("part-parameters"),u=w(),_=d.useMemo(()=>[{accessor:"part",sortable:!0,render:n=>ze(n==null?void 0:n.part_detail)},{accessor:"part_detail.IPN",sortable:!1,switchable:!0},{accessor:"template_detail.name",switchable:!1,sortable:!0,ordering:"name",render:n=>{var r;let m=String(s)!=String(n.part);return t.jsx(h,{italic:m,children:(r=n.template_detail)==null?void 0:r.name})}},W({accessor:"template_detail.description"}),{accessor:"data",switchable:!1,sortable:!0,render:n=>{let m=n.template_detail;if(m!=null&&m.checkbox)return t.jsx(de,{value:n.data});let r=[];return m.units&&n.data_numeric&&n.data_numeric!=n.data&&r.push(`${n.data_numeric} [${m.units}]`),t.jsx(G,{value:n.data,extra:r,title:e._({id:"Y0ne3N"})})}},{accessor:"template_detail.units",ordering:"units",sortable:!0}],[s]),a=d.useMemo(()=>({part:{},template:{},data:{}}),[]),f=Z({url:c.part_parameter_list,title:e._({id:"CzIiuH"}),fields:a,initialData:{part:s},onFormSuccess:o.refreshTable}),[p,k]=d.useState(void 0),i=z({url:c.part_parameter_list,pk:p,title:e._({id:"ZqLOh/"}),fields:a,onFormSuccess:o.refreshTable}),l=H({url:c.part_parameter_list,pk:p,title:e._({id:"uuJqm+"}),onFormSuccess:o.refreshTable}),b=d.useCallback(n=>String(s)!=String(n.part)?[]:[$({tooltip:e._({id:"ZqLOh/"}),hidden:!u.hasChangeRole(x.part),onClick:()=>{k(n.pk),i.open()}}),D({tooltip:e._({id:"uuJqm+"}),hidden:!u.hasDeleteRole(x.part),onClick:()=>{k(n.pk),l.open()}})],[s,u]),g=d.useMemo(()=>[t.jsx(J,{hidden:!u.hasAddRole(x.part),tooltip:e._({id:"2tuwGz"}),onClick:()=>f.open()})],[u]);return t.jsxs(t.Fragment,{children:[f.modal,i.modal,l.modal,t.jsx(I,{url:v(c.part_parameter_list),tableState:o,columns:_,props:{rowActions:b,tableActions:g,tableFilters:[{name:"include_variants",label:e._({id:"/g9i/Z"}),type:"boolean"}],params:{part:s,template_detail:!0,part_detail:!0}}})]})}function pt({partId:s}){const o=A("part-test-template"),u=w(),_=E(),a=d.useMemo(()=>[{accessor:"test_name",switchable:!1,sortable:!0,render:r=>t.jsx(h,{weight:r.required&&700,color:r.enabled?void 0:"red",children:r.test_name})},{accessor:"results",switchable:!0,sortable:!0,title:e._({id:"kx0s+n"}),render:r=>r.results||t.jsx(Q,{color:"blue",children:e._({id:"MA3x23"})})},W({switchable:!1}),C({accessor:"enabled"}),C({accessor:"required"}),C({accessor:"requires_value"}),C({accessor:"requires_attachment"})],[s]),f=d.useMemo(()=>[{name:"required",description:e._({id:"pgdOa+"})},{name:"enabled",description:e._({id:"E4Q3+2"})},{name:"requires_value",description:e._({id:"loHk6k"})},{name:"requires_attachment",description:e._({id:"ufV8ON"})},{name:"include_inherited",label:e._({id:"R9N/8P"}),description:e._({id:"e6bd4c"})},{name:"has_results",label:e._({id:"6pnRgI"}),description:e._({id:"+ZdPFq"})}],[]),p=d.useMemo(()=>({part:{hidden:!u.isStaff()},test_name:{},description:{},required:{},requires_value:{},requires_attachment:{},enabled:{}}),[u]),k=Z({url:c.part_test_template_list,title:e._({id:"c+EQoO"}),fields:p,initialData:{part:s},onFormSuccess:o.refreshTable}),[i,l]=d.useState(-1),b=z({url:c.part_test_template_list,pk:i,title:e._({id:"2aEufW"}),fields:p,onFormSuccess:o.refreshTable}),g=H({url:c.part_test_template_list,pk:i,title:e._({id:"ol4QKg"}),preFormContent:t.jsx(me,{color:"red",title:e._({id:"jIZttH"}),children:t.jsx(h,{children:t.jsx(X,{id:"E87VhQ"})})}),onFormSuccess:o.refreshTable}),n=d.useCallback(r=>{const N=u.hasChangeRole(x.part),B=u.hasDeleteRole(x.part);return r.part!=s?[]:[$({hidden:!N,onClick:()=>{l(r.pk),b.open()}}),D({hidden:!B,onClick:()=>{l(r.pk),g.open()}})]},[u,s]),m=d.useMemo(()=>{let r=u.hasAddRole(x.part);return[t.jsx(J,{tooltip:e._({id:"c+EQoO"}),onClick:()=>k.open(),disabled:!r})]},[u]);return t.jsxs(t.Fragment,{children:[k.modal,b.modal,g.modal,t.jsx(I,{url:v(c.part_test_template_list),tableState:o,columns:a,props:{params:{part:s,part_detail:!0},tableFilters:f,tableActions:m,rowActions:n,onRowClick:r=>{r.part&&r.part!=s&&_(Y(P.part,r.part))}}})]})}function mt({partId:s}){const o=d.useMemo(()=>[{name:"active",label:e._({id:"F6pfE9"}),description:e._({id:"rvLCOc"})},{name:"template",label:e._({id:"/K2CvV"}),description:e._({id:"GdgCV2"})},{name:"virtual",label:e._({id:"ksX7Wx"}),description:e._({id:"83ib20"})},{name:"trackable",label:e._({id:"y6MnU0"}),description:e._({id:"7VJ4Si"})}],[]);return t.jsx(Ge,{props:{enableDownload:!1,tableFilters:o,params:{ancestor:s}}})}function _t({partId:s}){const o=A("relatedparts"),u=E(),_=w(),a=d.useMemo(()=>{function n(m){return m.part_1==s?m.part_2_detail:m.part_1_detail}return[{accessor:"part",title:e._({id:"vgP+9p"}),render:m=>{let r=n(m);return t.jsxs(le,{noWrap:!0,position:"left",onClick:()=>{u(`/part/${r.pk}/`)},children:[t.jsx(oe,{src:r.thumbnail||r.image}),t.jsx(h,{children:r.name})]})}},{accessor:"description",title:e._({id:"Nu4oKW"}),ellipsis:!0,render:m=>n(m).description}]},[s]),f=d.useMemo(()=>({part_1:{hidden:!0},part_2:{}}),[]),p=Z({url:c.related_part_list,title:e._({id:"K0+pq1"}),fields:f,initialData:{part_1:s},onFormSuccess:o.refreshTable}),[k,i]=d.useState(void 0),l=H({url:c.related_part_list,pk:k,title:e._({id:"/kFxhJ"}),onFormSuccess:o.refreshTable}),b=d.useMemo(()=>[t.jsx(J,{tooltip:e._({id:"xG+5dj"}),hidden:!_.hasAddRole(x.part),onClick:()=>p.open()})],[_]),g=d.useCallback(n=>[D({hidden:!_.hasDeleteRole(x.part),onClick:()=>{i(n.pk),l.open()}})],[_]);return t.jsxs(t.Fragment,{children:[p.modal,l.modal,t.jsx(I,{url:v(c.related_part_list),tableState:o,columns:a,props:{params:{part:s,category_detail:!0},rowActions:g,tableActions:b}})]})}function zt(){const{id:s}=et(),o=w(),[u,_]=d.useState(!1),{instance:a,refreshInstance:f,instanceQuery:p}=Ye({endpoint:c.part_list,pk:s,params:{path_detail:!0},refetchOnMount:!0}),k=d.useMemo(()=>{if(p.isFetching)return t.jsx(R,{});let r=[{type:"text",name:"description",label:e._({id:"Nu4oKW"}),copy:!0},{type:"link",name:"variant_of",label:e._({id:"ji2aTl"}),model:P.part,hidden:!a.variant_of},{type:"link",name:"category",label:e._({id:"K7tIrx"}),model:P.partcategory},{type:"link",name:"default_location",label:e._({id:"xuaXgj"}),model:P.stocklocation,hidden:!a.default_location},{type:"string",name:"IPN",label:e._({id:"3wXEsN"}),copy:!0,hidden:!a.IPN},{type:"string",name:"revision",label:e._({id:"6LTyxl"}),copy:!0,hidden:!a.revision},{type:"string",name:"units",label:e._({id:"QrhaVg"}),copy:!0,hidden:!a.units},{type:"string",name:"keywords",label:e._({id:"/n/HCO"}),copy:!0,hidden:!a.keywords},{type:"link",name:"link",label:e._({id:"yzF66j"}),external:!0,copy:!0,hidden:!a.link}],N=[{type:"string",name:"unallocated_stock",unit:!0,label:e._({id:"oGd3rK"})},{type:"string",name:"total_in_stock",unit:!0,label:e._({id:"zn38D/"})},{type:"string",name:"minimum_stock",unit:!0,label:e._({id:"3K8S+7"}),hidden:a.minimum_stock<=0},{type:"string",name:"ordering",label:e._({id:"/MB+gl"}),unit:!0,hidden:a.ordering<=0},{type:"progressbar",name:"allocated_to_build_orders",total:a.required_for_build_orders,progress:a.allocated_to_build_orders,label:e._({id:"hHWm3x"}),hidden:!a.assembly||a.allocated_to_build_orders<=0&&a.required_for_build_orders<=0},{type:"progressbar",name:"allocated_to_sales_orders",total:a.required_for_sales_orders,progress:a.allocated_to_sales_orders,label:e._({id:"I4qXcg"}),hidden:!a.salable||a.allocated_to_sales_orders<=0&&a.required_for_sales_orders<=0},{type:"string",name:"can_build",unit:!0,label:e._({id:"S/9nwz"}),hidden:!a.assembly},{type:"string",name:"building",unit:!0,label:e._({id:"oZd08v"}),hidden:!a.assembly}],B=[{type:"boolean",name:"active",label:e._({id:"F6pfE9"})},{type:"boolean",name:"template",label:e._({id:"0ceRuG"})},{type:"boolean",name:"assembly",label:e._({id:"+e3Z9N"})},{type:"boolean",name:"component",label:e._({id:"kux4zT"})},{type:"boolean",name:"trackable",label:e._({id:"SH3bOE"})},{type:"boolean",name:"purchaseable",label:e._({id:"f9RadV"})},{type:"boolean",name:"saleable",label:e._({id:"HqVuYd"})},{type:"boolean",name:"virtual",label:e._({id:"PF44mc"})}],M=[{type:"string",name:"creation_date",label:e._({id:"FNcMGM"})},{type:"string",name:"creation_user",label:e._({id:"egTba/"}),badge:"user",icon:"user"},{type:"string",name:"responsible",label:e._({id:"XQACoK"}),badge:"owner",hidden:!a.responsible},{type:"link",name:"default_supplier",label:e._({id:"WpC0X0"}),model:P.supplierpart,hidden:!a.default_supplier}];return s&&M.push({type:"string",name:"pricing",label:e._({id:"YA4hwj"}),value_formatter:()=>{const{data:j}=K({queryKey:["pricing",s],queryFn:async()=>{const F=v(c.part_pricing_get,null,{id:s});return V.get(F).then(y=>{switch(y.status){case 200:return y.data;default:return null}}).catch(()=>null)}});return`${re(j.overall_min,j.overall_max)}${a.units&&" / "+a.units}`}}),s&&a.last_stocktake&&(M.push({type:"string",name:"stocktake",label:e._({id:"whZ7zT"}),unit:!0,value_formatter:()=>{const{data:j}=K({queryKey:["stocktake",s],queryFn:async()=>{const F=v(c.part_stocktake_list);return V.get(F,{params:{part:s,ordering:"date"}}).then(y=>{switch(y.status){case 200:return y.data[y.data.length-1];default:return null}}).catch(()=>null)}});return j.quantity?`${j.quantity} (${j.date})`:"-"}}),M.push({type:"string",name:"stocktake_user",label:e._({id:"TF+TDw"}),badge:"user",icon:"user",value_formatter:()=>{const{data:j}=K({queryKey:["stocktake",s],queryFn:async()=>{const F=v(c.part_stocktake_list);return V.get(F,{params:{part:s,ordering:"date"}}).then(y=>{switch(y.status){case 200:return y.data[y.data.length-1];default:return null}}).catch(()=>null)}});return j==null?void 0:j.user}})),t.jsxs(qe,{children:[t.jsxs(L,{children:[t.jsx(L.Col,{span:4,children:t.jsx(De,{appRole:x.part,imageActions:{selectExisting:!0,uploadFile:!0,deleteFile:!0},src:a.image,apiPath:v(c.part_list,a.pk),refresh:f,pk:a.pk})}),t.jsx(L.Col,{span:8,children:t.jsxs(O,{spacing:"xs",children:[t.jsx(rt,{part:a}),t.jsx(q,{fields:r,item:a})]})})]}),t.jsx(q,{fields:N,item:a}),t.jsx(q,{fields:B,item:a}),t.jsx(q,{fields:M,item:a})]})},[a,p]),i=d.useMemo(()=>[{name:"details",label:e._({id:"sQRZ1+"}),icon:t.jsx(_e,{}),content:k},{name:"parameters",label:e._({id:"F18WP3"}),icon:t.jsx(be,{}),content:t.jsx(ut,{partId:s??-1})},{name:"stock",label:e._({id:"blbbPS"}),icon:t.jsx(ee,{}),content:t.jsx(nt,{params:{part:a.pk??-1}})},{name:"variants",label:e._({id:"SDRhYQ"}),icon:t.jsx(he,{}),hidden:!a.is_template,content:t.jsx(mt,{partId:String(s)})},{name:"allocations",label:e._({id:"KwhnxF"}),icon:t.jsx(xe,{}),hidden:!a.component&&!a.salable},{name:"bom",label:e._({id:"/637F4"}),icon:t.jsx(fe,{}),hidden:!a.assembly,content:t.jsx(dt,{partId:a.pk??-1})},{name:"builds",label:e._({id:"RCVhIP"}),icon:t.jsx(ke,{}),hidden:!a.assembly,content:a!=null&&a.pk?t.jsx(tt,{partId:a.pk}):t.jsx(R,{})},{name:"used_in",label:e._({id:"5M5Kdm"}),icon:t.jsx(ge,{}),hidden:!a.component,content:t.jsx(ct,{partId:a.pk??-1})},{name:"pricing",label:e._({id:"aHCEmh"}),icon:t.jsx(je,{})},{name:"manufacturers",label:e._({id:"E0ub4Q"}),icon:t.jsx(ye,{}),hidden:!a.purchaseable,content:a.pk&&t.jsx(st,{params:{part:a.pk}})},{name:"suppliers",label:e._({id:"9RecCt"}),icon:t.jsx(ve,{}),hidden:!a.purchaseable,content:a.pk&&t.jsx(it,{params:{part:a.pk}})},{name:"purchase_orders",label:e._({id:"85Yvr2"}),icon:t.jsx(Te,{}),hidden:!a.purchaseable},{name:"sales_orders",label:e._({id:"B1TL+X"}),icon:t.jsx(Ce,{}),hidden:!a.salable,content:a.pk?t.jsx(lt,{partId:a.pk}):t.jsx(R,{})},{name:"scheduling",label:e._({id:"DbZMYM"}),icon:t.jsx(Pe,{})},{name:"stocktake",label:e._({id:"d5IWFK"}),icon:t.jsx(te,{})},{name:"test_templates",label:e._({id:"eeXE8u"}),icon:t.jsx(Se,{}),hidden:!a.trackable,content:a!=null&&a.pk?t.jsx(pt,{partId:a==null?void 0:a.pk}):t.jsx(R,{})},{name:"related_parts",label:e._({id:"AAoGm5"}),icon:t.jsx(Fe,{}),content:t.jsx(_t,{partId:a.pk??-1})},{name:"attachments",label:e._({id:"w/Sphq"}),icon:t.jsx(we,{}),content:t.jsx(at,{endpoint:c.part_attachment_list,model:"part",pk:a.pk??-1})},{name:"notes",label:e._({id:"1DBGsz"}),icon:t.jsx(Ae,{}),content:t.jsx(Ee,{url:v(c.part_list,a.pk),data:a.notes??"",allowEdit:!0})}],[s,a]),l=d.useMemo(()=>[{name:e._({id:"pmRbKZ"}),url:"/part"},...(a.category_path??[]).map(r=>({name:r.name,url:`/part/category/${r.pk}`}))],[a]),b=d.useMemo(()=>t.jsx(le,{spacing:"xs",noWrap:!0,children:t.jsx(O,{spacing:"xs",children:t.jsxs(h,{children:["Stock: ",a.in_stock]})})}),[a,s]),g=He({create:!1}),n=z({url:c.part_list,pk:a.pk,title:e._({id:"enG3o5"}),fields:g,onFormSuccess:f}),m=d.useMemo(()=>[t.jsx(Ne,{actions:[Be({}),Ke({disabled:a==null?void 0:a.barcode_hash}),Le({disabled:!(a!=null&&a.barcode_hash)})]}),t.jsx(ae,{tooltip:e._({id:"bbA1t1"}),icon:t.jsx(ee,{}),actions:[{icon:t.jsx(te,{color:"blue"}),name:e._({id:"n/p2QJ"}),tooltip:e._({id:"4Qpffa"})},{icon:t.jsx(Ie,{color:"blue"}),name:e._({id:"9efe+k"}),tooltip:e._({id:"tnr8CD"})}]},"stock"),t.jsx(ae,{tooltip:e._({id:"loB51L"}),icon:t.jsx(Me,{}),actions:[Oe({}),Ve({disabled:!o.hasChangeRole(x.part),onClick:()=>n.open()}),Qe({disabled:a==null?void 0:a.active})]},"part")],[s,a,o]);return t.jsxs(t.Fragment,{children:[n.modal,t.jsxs(O,{spacing:"xs",children:[t.jsx(Re,{visible:p.isFetching}),t.jsx(We,{opened:u,onClose:()=>{_(!1)},selectedCategory:a==null?void 0:a.category}),t.jsx(Ue,{title:e._({id:"vgP+9p"})+": "+a.full_name,subtitle:a.description,imageUrl:a.image,detail:b,breadcrumbs:l,breadcrumbAction:()=>{_(!0)},actions:m}),t.jsx(Xe,{pageKey:"part",panels:i})]})]})}export{zt as default};
