import{r as f,n as t,i as o,j as e,C as u,g,S as m,T as x,dZ as _,o as j}from"./vendor-580d7f6a.js";import{L as k,T as l}from"./BaseContext-71d55e61.js";import{f as T,u as C}from"./DesktopAppView-f36ad07f.js";import{g as E,i as F,A as P}from"./index-539d0685.js";import{u as S}from"./use-form-08e322e0.js";function L(){const i=S({initialValues:{password:""}}),[n]=T(),r=C(),a=n.get("token"),d=n.get("uid");function w(){t.show({title:o._({id:"eV2FZ+"}),message:o._({id:"uAHzZQ"}),color:"red"}),r("/login")}function p(s){t.show({title:o._({id:"WhimMi"}),message:(s==null?void 0:s.new_password2)||(s==null?void 0:s.new_password1)||(s==null?void 0:s.token),color:"red"})}f.useEffect(()=>{(!a||!d)&&(t.show({title:o._({id:"+5xxir"}),message:o._({id:"KuLTFa"}),color:"red"}),r("/login"))},[a]);function h(){E.post(F(P.user_reset_set),{uid:d,token:a,new_password1:i.values.password,new_password2:i.values.password},{headers:{Authorization:""}}).then(s=>{s.status===200?(t.show({title:o._({id:"Hw2MHB"}),message:o._({id:"+p8fKY"}),color:"green",autoClose:!1}),r("/login")):p(s.data)}).catch(s=>{var c;s.response.status===400&&((c=s.response.data)==null?void 0:c.token)=="Invalid value"?w():p(s.response.data)})}return e.jsx(k,{children:e.jsx(u,{mih:"100vh",children:e.jsx(g,{w:"md",miw:425,children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(l,{id:"V/e7nf"})}),e.jsx(m,{children:e.jsx(_,{required:!0,label:o._({id:"8ZsakT"}),description:o._({id:"Wr5sDQ"}),...i.getInputProps("password")})}),e.jsx(j,{type:"submit",onClick:h,children:e.jsx(l,{id:"F+gz9Z"})})]})})})})}export{L as default};
