import{j as e,bt as x,b$ as j,bb as C,bM as y,bS as U,ax as g,aw as v,r as o,i as t}from"./vendor-580d7f6a.js";import{A as F}from"./AddItemButton-9bde5586.js";import{P as S,c as k}from"./Instance-4f17d9b0.js";import{P as I}from"./ProgressBar-f667695e.js";import{R,S as T,b as D,C as h,T as A,r as M,d as w}from"./ColumnRenderers-c7f5177c.js";import{M as a,a as B,A as d,U as L,i as O}from"./index-539d0685.js";import{g as p}from"./urls-9eea01e5.js";import{a as P}from"./UseForm-5e9a21d6.js";import{S as E,u as q,I as H}from"./InvenTreeTable-7dffc519.js";import{u as W}from"./DesktopAppView-f36ad07f.js";function G(){return{reference:{},part:{filters:{assembly:!0,virtual:!1}},title:{},quantity:{},project_code:{icon:e.jsx(x,{})},priority:{},parent:{icon:e.jsx(j,{}),filters:{part_detail:!0}},sales_order:{icon:e.jsx(C,{})},batch:{},target_date:{icon:e.jsx(y,{})},take_from:{},destination:{filters:{structural:!1}},link:{icon:e.jsx(U,{})},issued_by:{icon:e.jsx(g,{})},responsible:{icon:e.jsx(v,{}),filters:{is_active:!0}}}}function N(){return[R(),{accessor:"part",sortable:!0,switchable:!1,render:s=>e.jsx(S,{part:s.part_detail})},{accessor:"title",sortable:!1},{accessor:"completed",sortable:!0,switchable:!1,render:s=>e.jsx(I,{progressLabel:!0,value:s.completed,maximum:s.quantity})},T(a.build),D(),{accessor:"priority",sortable:!0},h(),A(),{accessor:"completion_date",sortable:!0,render:s=>M(s.completion_date)},{accessor:"issued_by",sortable:!0,render:s=>e.jsx(k,{instance:s==null?void 0:s.issued_by_detail})},w()]}function se({partId:s,parentBuildId:i,salesOrderId:n}){const m=o.useMemo(()=>N(),[]),b=o.useMemo(()=>[{name:"active",type:"boolean",label:t._({id:"F6pfE9"}),description:t._({id:"Or8Url"})},{name:"status",description:t._({id:"OIH7WF"}),choiceFunction:E(a.build)},{name:"overdue",type:"boolean",description:t._({id:"bWsuU0"})},{name:"assigned_to_me",type:"boolean",label:t._({id:"iU3XRS"}),description:t._({id:"BnF3ID"})}],[]),l=W(),u=B(),_=q("buildorder"),c=P({url:d.build_order_list,title:t._({id:"59jtLx"}),fields:G(),initialData:{part:s,sales_order:n,parent:i},onFormSuccess:r=>{r.pk&&l(p(a.build,r.pk))}}),f=o.useMemo(()=>[e.jsx(F,{hidden:!u.hasAddRole(L.build),tooltip:t._({id:"59jtLx"}),onClick:()=>c.open()})],[u]);return e.jsxs(e.Fragment,{children:[c.modal,e.jsx(H,{url:O(d.build_order_list),tableState:_,columns:m,props:{enableDownload:!0,params:{part:s,sales_order:n,parent:i,part_detail:!0},tableActions:f,tableFilters:b,onRowClick:r=>l(p(a.build,r.pk))}})]})}export{se as B,G as b};
