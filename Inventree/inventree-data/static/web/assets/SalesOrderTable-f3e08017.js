import{j as e,ax as b,cu as j,cv as x,r as n,i as t}from"./vendor-580d7f6a.js";import{A as F}from"./AddItemButton-9bde5586.js";import{T}from"./Instance-4f17d9b0.js";import{a as g,M as o,A as d,U as A,i as S}from"./index-539d0685.js";import{g as p}from"./urls-9eea01e5.js";import{a as M}from"./UseForm-5e9a21d6.js";import{u as U,S as k,O as I,b as O,c as h,I as D}from"./InvenTreeTable-7dffc519.js";import{R,D as y,a as E,S as v,b as P,C as V,T as W,f as z,c as B}from"./ColumnRenderers-c7f5177c.js";import{u as q}from"./DesktopAppView-f36ad07f.js";function w(){return{reference:{},description:{},customer:{filters:{is_customer:!0}},customer_reference:{},project_code:{},order_currency:{},target_date:{},link:{},contact:{icon:e.jsx(b,{}),adjustFilters:s=>({...s.filters,company:s.data.customer})},address:{icon:e.jsx(j,{}),adjustFilters:s=>({...s.filters,company:s.data.customer})},responsible:{icon:e.jsx(x,{})}}}function Y({partId:s,customerId:i}){const l=U("sales-order"),c=g(),u=q(),f=n.useMemo(()=>[{name:"status",label:t._({id:"uAQUqI"}),description:t._({id:"OIH7WF"}),choiceFunction:k(o.salesorder)},I(),O(),h()],[]),m=M({url:d.sales_order_list,title:t._({id:"VzdnWM"}),fields:w(),initialData:{customer:i},onFormSuccess:r=>{r.pk?u(p(o.salesorder,r.pk)):l.refreshTable()}}),_=n.useMemo(()=>[e.jsx(F,{tooltip:t._({id:"VzdnWM"}),onClick:()=>m.open(),hidden:!c.hasAddRole(A.sales_order)})],[c]),C=n.useMemo(()=>[R(),{accessor:"customer__name",title:t._({id:"876pfE"}),sortable:!0,render:function(r){let a=r.customer_detail??{};return e.jsx(T,{src:a==null?void 0:a.image,alt:a.name,text:a.name})}},{accessor:"customer_reference",title:t._({id:"ZVUe1A"})},y({}),E(),v(o.salesorder),P(),V(),W(),z(),B()],[]);return e.jsxs(e.Fragment,{children:[m.modal,e.jsx(D,{url:S(d.sales_order_list),tableState:l,columns:C,props:{params:{customer_detail:!0,part:s,customer:i},tableFilters:f,tableActions:_,onRowClick:r=>{r.pk&&u(p(o.salesorder,r.pk))}}})]})}export{Y as S};
