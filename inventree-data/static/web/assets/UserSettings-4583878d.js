import{r as x,x as V,j as e,S as _,T as I,af as W,ao as b,i as a,L as v,b7 as h,dk as O,G as S,y,h as T,aj as U,cc as X,o as f,ag as J,dl as Z,g as N,z as M,dm as Y,dn as $,dp as w,dq as ee,aK as se,a9 as ne,dr as te,ds as ie,dt as re,du as ae,ak as le,dv as oe,dw as de}from"./vendor-580d7f6a.js";import{T as s}from"./BaseContext-71d55e61.js";import{P as ce}from"./PanelGroup-ecf19d17.js";import{U as D,S as xe}from"./SettingList-5fd10bc0.js";import{a as k,A as E,g as p,i as A,q as je,o as ue,S as L,u as g}from"./index-539d0685.js";import{P as he}from"./Placeholder-f60056df.js";import{E as _e}from"./EditButton-578ed85a.js";import{u as Ee}from"./use-form-08e322e0.js";import{C as Se,L as me}from"./LanguageSelect-936cbb64.js";import{I as Ce}from"./StylishText-5ee5b946.js";import"./DesktopAppView-f36ad07f.js";import"./ApiForm-173d0ec5.js";import"./notifications-b554622d.js";import"./Instance-4f17d9b0.js";function Re(){const[i,n]=x.useState(!1),[d,u]=x.useState(!1),{isLoading:j,data:c}=V({queryKey:["sso-providers"],queryFn:()=>p.get(A(E.sso_providers)).then(o=>o.data)});return x.useEffect(()=>{c!==void 0&&(n(c.sso_enabled||!1),u(c.mfa_required||!1))},[c]),e.jsxs(_,{children:[e.jsx(I,{order:5,children:e.jsx(s,{id:"O3oNi5"})}),e.jsx(fe,{}),e.jsx(I,{order:5,children:e.jsx(s,{id:"sGV/QR"})}),i?e.jsx(pe,{dataProvider:c}):e.jsx(W,{icon:e.jsx(b,{size:"1rem"}),title:a._({id:"GYQmzM"}),color:"yellow",children:e.jsx(s,{id:"Sm3zWc"})}),e.jsx(I,{order:5,children:e.jsx(s,{id:"gzRIYb"})}),j?e.jsx(v,{}):e.jsx(e.Fragment,{children:d?e.jsx(Ae,{}):e.jsx(W,{icon:e.jsx(b,{size:"1rem"}),title:a._({id:"GYQmzM"}),color:"yellow",children:e.jsx(s,{id:"3JPMTK"})})})]})}function fe({}){const[i,n]=x.useState(""),[d,u]=x.useState(""),[j]=k(r=>[r.user]),{isLoading:c,data:o,refetch:m}=V({queryKey:["emails"],queryFn:()=>p.get(A(E.user_emails)).then(r=>r.data)});function C(r){p.post(A(r,void 0,{id:i}),{}).then(()=>{m()}).catch(R=>console.log(R.data))}function t(){p.post(A(E.user_emails),{email:d,user:j==null?void 0:j.pk}).then(()=>{m()}).catch(r=>console.log(r.data))}return c?e.jsx(v,{}):e.jsxs(h,{children:[e.jsx(h.Col,{span:6,children:e.jsx(O.Group,{value:i,onChange:n,name:"email_accounts",label:a._({id:"Xfy/DT"}),children:e.jsx(_,{mt:"xs",children:o.map(r=>e.jsx(O,{value:String(r.id),label:e.jsxs(S,{position:"apart",children:[r.email,r.primary&&e.jsx(y,{color:"blue",children:e.jsx(s,{id:"T/R+Qz"})}),r.verified?e.jsx(y,{color:"green",children:e.jsx(s,{id:"QDEWii"})}):e.jsx(y,{color:"yellow",children:e.jsx(s,{id:"VBTGXl"})})]})},r.id))})})}),e.jsx(h.Col,{span:6,children:e.jsxs(_,{children:[e.jsx(T,{children:e.jsx(s,{id:"oLztc+"})}),e.jsx(U,{label:a._({id:"Y/cuRF"}),placeholder:a._({id:"JqLqpm"}),icon:e.jsx(X,{}),value:d,onChange:r=>u(r.currentTarget.value)})]})}),e.jsx(h.Col,{span:6,children:e.jsxs(S,{children:[e.jsx(f,{onClick:()=>C(E.user_email_primary),children:e.jsx(s,{id:"g/Kbij"})}),e.jsx(f,{onClick:()=>C(E.user_email_verify),children:e.jsx(s,{id:"+GoJJW"})}),e.jsx(f,{onClick:()=>C(E.user_email_remove),children:e.jsx(s,{id:"t/YqKh"})})]})}),e.jsx(h.Col,{span:6,children:e.jsx(f,{onClick:t,children:e.jsx(s,{id:"0+CYPj"})})})]})}function pe({dataProvider:i}){const[n,d]=x.useState(""),[u,j]=x.useState(),{isLoading:c,data:o}=V({queryKey:["sso-list"],queryFn:()=>p.get(A(E.user_sso)).then(t=>t.data)});x.useEffect(()=>{if(i===void 0||o===void 0)return;const t=o.map(P=>P.provider);function r(P){return!t.includes(P.id)}let R=i.providers;R=R.filter(r),j(R)},[i,o]);function m(){p.post(A(E.user_sso_remove,void 0,{id:n})).then(()=>{je.removeQueries({queryKey:["sso-list"]})}).catch(t=>console.log(t.data))}if(c)return e.jsx(v,{});function C({provider:t}){const r=e.jsx(f,{component:"a",href:t.connect,variant:"outline",disabled:!t.configured,children:e.jsxs(S,{position:"apart",children:[t.display_name,t.configured==!1&&e.jsx(b,{})]})},t.id);return t.configured?r:e.jsx(J,{label:a._({id:"vwfjas"}),children:r})}return e.jsxs(h,{children:[e.jsx(h.Col,{span:6,children:o.length==0?e.jsx(W,{icon:e.jsx(b,{size:"1rem"}),title:a._({id:"SDND4q"}),color:"yellow",children:e.jsx(s,{id:"fkCzQP"})}):e.jsxs(_,{children:[e.jsx(O.Group,{value:n,onChange:d,name:"sso_accounts",label:a._({id:"B1uCAI"}),children:e.jsx(_,{mt:"xs",children:o.map(t=>e.jsx(O,{value:String(t.id),label:t.provider},t.id))})}),e.jsx(f,{onClick:m,children:e.jsx(s,{id:"t/YqKh"})})]})}),e.jsx(h.Col,{span:6,children:e.jsxs(_,{children:[e.jsx(T,{children:"Add SSO Account"}),e.jsx(T,{children:u===void 0?e.jsx(s,{id:"yQE2r9"}):e.jsx(_,{spacing:"xs",children:u.map(t=>e.jsx(C,{provider:t},t.id))})})]})})]})}function Ae({}){return e.jsxs(e.Fragment,{children:["MFA Details",e.jsx(he,{})]})}function ge(){const[i,n]=k(o=>[o.user,o.fetchUserState]),d=Ee({initialValues:i}),[u,j]=Z([!1,!0]);function c(o){p.put(A(E.user_me),o).then(m=>{m.status===200&&(j(),n())})}return e.jsxs("form",{onSubmit:d.onSubmit(o=>c(o)),children:[e.jsxs(S,{children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"AQoSYJ"})}),e.jsx(_e,{setEditing:j,editing:u})]}),e.jsx(S,{children:u?e.jsxs(_,{spacing:"xs",children:[e.jsx(U,{label:"first name",placeholder:a._({id:"V1EGGU"}),...d.getInputProps("first_name")}),e.jsx(U,{label:"Last name",placeholder:a._({id:"1ZaQUH"}),...d.getInputProps("last_name")}),e.jsx(S,{position:"right",mt:"md",children:e.jsx(f,{type:"submit",children:e.jsx(s,{id:"hQRttt"})})})]}):e.jsxs(_,{spacing:"0",children:[e.jsxs(T,{children:[e.jsx(s,{id:"7eE++L"}),d.values.first_name]}),e.jsxs(T,{children:[e.jsx(s,{id:"FSN9CU"}),d.values.last_name]})]})})]})}function Ie({height:i}){return e.jsxs(N,{w:"100%",mih:i,p:0,children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"DdjH42"})}),e.jsx(M,{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"FpsvqB"})}),e.jsx("td",{children:e.jsx(S,{children:e.jsx(Se,{})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"vXIe7J"})}),e.jsxs("td",{children:[" ",e.jsxs(S,{children:[e.jsx(me,{width:200}),ue]})]})]})]})})]})}function Pe(i){return{[Y.colors[i][6]]:i}}const F=Object.assign({},...Object.keys(Y.colors).map(i=>Pe(i)));function Te({height:i}){const{theme:n}=Ce();function d(l){g.setState({primaryColor:F[l]})}const[u,j]=x.useState(n.white);function c(l){g.setState({whiteColor:l}),j(l)}const[o,m]=x.useState(n.black);function C(l){g.setState({blackColor:l}),m(l)}function t(l){const H=L.find(z=>z.value===l);return H||L[0]}function r(){const l=L.find(H=>H.label===g.getState().radius);return l?l.value:50}const[R,P]=x.useState(r());function B(l){P(l),g.setState({radius:t(l).label})}const K=[{value:"bars",label:a._({id:"M46ISI"})},{value:"oval",label:a._({id:"Ai6veK"})},{value:"dots",label:a._({id:"8zGXnJ"})}],[G,q]=x.useState(n.loader);function Q(l){q(l),g.setState({loader:l})}return e.jsxs(N,{w:"100%",mih:i,p:0,children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"FEr96N"})}),e.jsx(M,{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"QFd2P1"})}),e.jsx("td",{children:e.jsx($,{format:"hex",onChange:d,withPicker:!1,swatches:Object.keys(F)})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"160vo+"})}),e.jsx("td",{children:e.jsx(w,{value:u,onChange:c})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"u01284"})}),e.jsx("td",{children:e.jsx(w,{value:o,onChange:C})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"bjp1xg"})}),e.jsx("td",{children:e.jsx(ee,{label:l=>t(l).label,defaultValue:50,step:25,marks:L,value:R,onChange:B,mb:18})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"EBeoY+"})}),e.jsx("td",{children:e.jsxs(S,{align:"center",children:[e.jsx(se,{data:K,value:G,onChange:Q}),e.jsx(v,{type:G,mah:18})]})})]})]})})]})}function He(){return e.jsx("div",{children:e.jsxs(ne,{cols:2,spacing:"md",children:[e.jsx(N,{w:"100%",children:e.jsx(ge,{})}),e.jsxs(h,{gutter:"md",children:[e.jsx(h.Col,{children:e.jsx(Te,{height:142})}),e.jsx(h.Col,{children:e.jsx(Ie,{height:142})})]})]})})}function Me(){const i=x.useMemo(()=>[{name:"account",label:a._({id:"AeXO77"}),icon:e.jsx(te,{}),content:e.jsx(He,{})},{name:"security",label:a._({id:"a3LDKx"}),icon:e.jsx(ie,{}),content:e.jsx(Re,{})},{name:"dashboard",label:a._({id:"7p5kLi"}),icon:e.jsx(re,{})},{name:"display",label:a._({id:"+4YDgS"}),icon:e.jsx(ae,{}),content:e.jsx(D,{keys:["STICKY_HEADER","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","PART_SHOW_QUANTITY_IN_FORMS","DISPLAY_SCHEDULE_TAB","DISPLAY_STOCKTAKE_TAB","TABLE_STRING_MAX_LENGTH"]})},{name:"search",label:a._({id:"A1taO8"}),icon:e.jsx(le,{}),content:e.jsx(D,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:a._({id:"iDNBZe"}),icon:e.jsx(oe,{})},{name:"reporting",label:a._({id:"ApEshE"}),icon:e.jsx(de,{}),content:e.jsx(D,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})}],[]),[n]=k(d=>[d.user]);return e.jsx(e.Fragment,{children:e.jsxs(_,{spacing:"xs",children:[e.jsx(xe,{title:a._({id:"Puv7+X"}),subtitle:`${n==null?void 0:n.first_name} ${n==null?void 0:n.last_name}`,shorthand:(n==null?void 0:n.username)||"",switch_link:"/settings/system",switch_text:e.jsx(s,{id:"4ejweu"}),switch_condition:(n==null?void 0:n.is_staff)||!1}),e.jsx(ce,{pageKey:"user-settings",panels:i})]})})}export{Me as default};
