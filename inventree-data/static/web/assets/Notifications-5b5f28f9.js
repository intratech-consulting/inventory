import{r as c,i as t,j as e,dh as _,cW as j,di as k,ah as C,dj as T,bG as m,S as g}from"./vendor-580d7f6a.js";import{i as s,A as n,g as r}from"./index-539d0685.js";import{I as A,u,A as h}from"./InvenTreeTable-7dffc519.js";import{P}from"./PageDetail-e83b8dc6.js";import{P as I}from"./PanelGroup-ecf19d17.js";import{m as M}from"./BaseContext-71d55e61.js";import"./notifications-b554622d.js";import"./ApiForm-173d0ec5.js";import"./Instance-4f17d9b0.js";import"./StylishText-5ee5b946.js";import"./DesktopAppView-f36ad07f.js";import"./Placeholder-f60056df.js";function b({params:o,tableState:a,tableActions:p,actions:d}){const f=c.useMemo(()=>[{accessor:"age_human",title:t._({id:"RCU5PY"}),sortable:!0},{accessor:"category",title:t._({id:"K7tIrx"}),sortable:!0},{accessor:"name",title:t._({id:"5+87Pq"})},{accessor:"message",title:t._({id:"xDAtGP"})}],[]);return e.jsx(A,{url:s(n.notifications_list),tableState:a,columns:f,props:{rowActions:d,tableActions:p,enableSelection:!0,params:o}})}function U(){const o=u("unreadnotifications"),a=u("readnotifications"),p=c.useCallback(()=>{r.get(s(n.notifications_readall),{params:{read:!1}}).then(i=>{o.refreshTable(),a.refreshTable()}).catch(i=>{})},[]),d=c.useCallback(()=>{M.openConfirmModal({title:t._({id:"Zez9Ff"}),onConfirm:()=>{r.delete(s(n.notifications_list),{data:{filters:{read:!0}}}).then(i=>{a.refreshTable()}).catch(i=>{})}})},[]),f=c.useMemo(()=>[{name:"unread",label:t._({id:"iDNBZe"}),icon:e.jsx(_,{size:"18"}),content:e.jsx(b,{params:{read:!1},tableState:o,actions:i=>[{title:t._({id:"+s1J8k"}),color:"green",icon:e.jsx(j,{}),onClick:()=>{let l=s(n.notifications_list,i.pk);r.patch(l,{read:!0}).then(x=>{o.refreshTable()})}}],tableActions:[e.jsx(h,{icon:e.jsx(k,{}),tooltip:"Mark all as read",onClick:p})]})},{name:"history",label:t._({id:"0caMy7"}),icon:e.jsx(C,{size:"18"}),content:e.jsx(b,{params:{read:!0},tableState:a,actions:i=>[{title:t._({id:"5GPcf9"}),icon:e.jsx(T,{}),onClick:()=>{let l=s(n.notifications_list,i.pk);r.patch(l,{read:!1}).then(x=>{a.refreshTable()})}},{title:t._({id:"cnGeoo"}),color:"red",icon:e.jsx(m,{}),onClick:()=>{r.delete(s(n.notifications_list,i.pk)).then(l=>{a.refreshTable()})}}],tableActions:[e.jsx(h,{color:"red",icon:e.jsx(m,{}),tooltip:"Delete notifications",onClick:d})]})}],[o,a]);return e.jsx(e.Fragment,{children:e.jsxs(g,{children:[e.jsx(P,{title:t._({id:"iDNBZe"})}),e.jsx(I,{pageKey:"notifications",panels:f})]})})}export{U as default};
